'use strict';

document.addEventListener('DOMContentLoaded', function () {
    var cards = document.querySelectorAll('[data-card=""]'),
        tabs = document.querySelectorAll('[data-tab-open]'),
        showMore = document.querySelector('[data-show-props]');

    if (showMore) {
        showMore.addEventListener('click', function (e) {
            e.preventDefault();
            var hiddenItems = document.querySelectorAll('[data-hidden-prop="true"]');
            if (showMore.classList.contains('active')) {
                hiddenItems.forEach(function (element) {
                    element.classList.remove('hidden');
                });
                showMore.classList.remove('active');
                showMore.querySelector('span').innerText = 'Развернуть';
            } else {
                hiddenItems.forEach(function (element) {
                    element.classList.add('hidden');
                });
                showMore.classList.add('active');
                showMore.querySelector('span').innerText = 'Свернуть';
            }
        });
    }

    if (cards) {
        cards.forEach(function (card) {
            card.addEventListener('mousemove', startMove);
            card.addEventListener('mouseout', stopMove);
            function startMove(e) {
                var height = this.offsetHeight,
                    width = this.offsetWidth;
                this.style.transform = 'translateY(' + (e.offsetY - height) / 50 + 'px) translateX(' + (e.offsetX - width) / 50 + 'px)';
            };

            function stopMove() {
                this.style.transform = 'translate(0, 0)';
            };
        });
    }
    if (tabs) {
        tabs.forEach(function (tab) {
            tab.addEventListener('click', function (e) {
                e.preventDefault();
                var id = this.dataset.tabOpen,
                    parentBlock = this.closest('.tabs-wrapper'),
                    tabsBlocks = parentBlock.querySelectorAll('[data-tab]'),
                    tabsButtons = parentBlock.querySelectorAll('[data-tab-open]');
                tabsBlocks.forEach(function (block) {
                    block.classList.remove('active');
                });
                tabsButtons.forEach(function (button) {
                    button.classList.remove('active');
                });
                this.classList.add('active');
                document.querySelector('[data-tab="' + id + '"]').classList.add('active');
            });
        });
    }
    $('[data-modal]').iziModal();
    $('[data-modal-open]').on('click', function (e) {
        e.preventDefault();
        var id = $(this).attr('data-modal-open');
        console.log(id);
        $('[data-modal=' + id + ']').iziModal('open');
    });
    $('.filter-range').each(function (i, elem) {
        var range = $(elem).find('.js-range-from-to'),
            inputFrom = $(elem).find('[data-from]'),
            inputTo = $(elem).find('[data-to]');
        $(range).ionRangeSlider({
            min: $('.js-range-from-to').data('min'),
            max: $('.js-range-from-to').data('max'),
            from: $('.js-range-from-to').data('from'),
            to: $('.js-range-from-to').data('to'),
            type: 'double',
            onChange: function onChange(data) {
                $(inputTo).val(data.to_pretty);
                $(inputFrom).val(data.from_pretty);
            }
        });
    });
    $('.filter-block__title').on('click', function () {
        $(this).toggleClass('active');
        $(this).closest('.filter-block').find('.filter-block__content').slideToggle();
    });

    $('.select').niceSelect();

    $('.slider').each(function (i, slider) {
        var slidesToShow = +slider.dataset.count,
            slides = $(slider).find('.slider__list'),
            prevArrow = $(slider).find('[data-slider-arrow="prev"]'),
            nextArrow = $(slider).find('[data-slider-arrow="next"]');
        slides.slick({
            slidesToShow: slidesToShow,
            prevArrow: prevArrow,
            nextArrow: nextArrow,
            responsive: [{
                breakpoint: 1600,
                settings: {
                    slidesToShow: slidesToShow - 1
                }
            }, {
                breakpoint: 1440,
                settings: {
                    slidesToShow: slidesToShow - 2
                }
            }, {
                breakpoint: 1025,
                settings: {
                    variableWidth: true
                }
            }]
        });
    });

    $('[data-filter-toggle]').on('click', function () {
        $('.filter__wrapper').slideToggle();
    });

    $('.burger').on('click', function () {
        if ($('.burger').hasClass('active')) {
            $('.burger').removeClass('active');
            $('body').css({
                'overflow-y': 'unset'
            });
        } else {
            $('.burger').addClass('active');
            $('body').css({
                'overflow-y': 'hidden'
            });
            $('[data-first-level]').fadeIn(400);
        }
    });
    $('.mobile-menu__close').on('click', function () {
        $('.mobile-menu').fadeOut(400);
        $('.burger').removeClass('active');
        $('body').css({
            'overflow-y': 'unset'
        });
    });
    $('[data-submenu-open]').on('click', function () {
        var id = $(this).data('submenu-open');
        $('[data-submenu="' + id + '"]').fadeIn(400);
    });
    $('.mobile-menu__back').on('click', function () {
        $('[data-submenu]').fadeOut(400);
    });
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdC5qcyJdLCJuYW1lcyI6WyJkb2N1bWVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJjYXJkcyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJ0YWJzIiwic2hvd01vcmUiLCJxdWVyeVNlbGVjdG9yIiwiZSIsInByZXZlbnREZWZhdWx0IiwiaGlkZGVuSXRlbXMiLCJjbGFzc0xpc3QiLCJjb250YWlucyIsImZvckVhY2giLCJlbGVtZW50IiwicmVtb3ZlIiwiaW5uZXJUZXh0IiwiYWRkIiwiY2FyZCIsInN0YXJ0TW92ZSIsInN0b3BNb3ZlIiwiaGVpZ2h0Iiwib2Zmc2V0SGVpZ2h0Iiwid2lkdGgiLCJvZmZzZXRXaWR0aCIsInN0eWxlIiwidHJhbnNmb3JtIiwib2Zmc2V0WSIsIm9mZnNldFgiLCJ0YWIiLCJpZCIsImRhdGFzZXQiLCJ0YWJPcGVuIiwicGFyZW50QmxvY2siLCJjbG9zZXN0IiwidGFic0Jsb2NrcyIsInRhYnNCdXR0b25zIiwiYmxvY2siLCJidXR0b24iLCIkIiwiaXppTW9kYWwiLCJvbiIsImF0dHIiLCJjb25zb2xlIiwibG9nIiwiZWFjaCIsImkiLCJlbGVtIiwicmFuZ2UiLCJmaW5kIiwiaW5wdXRGcm9tIiwiaW5wdXRUbyIsImlvblJhbmdlU2xpZGVyIiwibWluIiwiZGF0YSIsIm1heCIsImZyb20iLCJ0byIsInR5cGUiLCJvbkNoYW5nZSIsInZhbCIsInRvX3ByZXR0eSIsImZyb21fcHJldHR5IiwidG9nZ2xlQ2xhc3MiLCJzbGlkZVRvZ2dsZSIsIm5pY2VTZWxlY3QiLCJzbGlkZXIiLCJzbGlkZXNUb1Nob3ciLCJjb3VudCIsInNsaWRlcyIsInByZXZBcnJvdyIsIm5leHRBcnJvdyIsInNsaWNrIiwicmVzcG9uc2l2ZSIsImJyZWFrcG9pbnQiLCJzZXR0aW5ncyIsInZhcmlhYmxlV2lkdGgiLCJoYXNDbGFzcyIsInJlbW92ZUNsYXNzIiwiY3NzIiwiYWRkQ2xhc3MiLCJmYWRlSW4iLCJmYWRlT3V0Il0sIm1hcHBpbmdzIjoiOztBQUFB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QUFFLGdCQUFGLEVBQW9CMkMsT0FBcEIsQ0FBNEIsR0FBNUI7QUFDSCxLQUZEO0FBR0gsQ0ExSkQiLCJmaWxlIjoic2NyaXB0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsZnVuY3Rpb24oKXtcclxuICAgIGNvbnN0IGNhcmRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtY2FyZD1cIlwiXScpLFxyXG4gICAgICAgICAgdGFicyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLXRhYi1vcGVuXScpLFxyXG4gICAgICAgICAgc2hvd01vcmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1zaG93LXByb3BzXScpXHJcblxyXG4gICAgaWYoc2hvd01vcmUpe1xyXG4gICAgICAgIHNob3dNb3JlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiB7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgY29uc3QgaGlkZGVuSXRlbXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1oaWRkZW4tcHJvcD1cInRydWVcIl0nKVxyXG4gICAgICAgICAgICBpZihzaG93TW9yZS5jbGFzc0xpc3QuY29udGFpbnMoJ2FjdGl2ZScpKXtcclxuICAgICAgICAgICAgICAgIGhpZGRlbkl0ZW1zLmZvckVhY2goIGVsZW1lbnQgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHNob3dNb3JlLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgc2hvd01vcmUucXVlcnlTZWxlY3Rvcignc3BhbicpLmlubmVyVGV4dCA9ICfQoNCw0LfQstC10YDQvdGD0YLRjCc7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBoaWRkZW5JdGVtcy5mb3JFYWNoKCBlbGVtZW50ID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBzaG93TW9yZS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgIHNob3dNb3JlLnF1ZXJ5U2VsZWN0b3IoJ3NwYW4nKS5pbm5lclRleHQgPSAn0KHQstC10YDQvdGD0YLRjCc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBpZihjYXJkcyl7XHJcbiAgICAgICAgY2FyZHMuZm9yRWFjaChjYXJkID0+IHtcclxuICAgICAgICAgICAgY2FyZC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBzdGFydE1vdmUpO1xyXG4gICAgICAgICAgICBjYXJkLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3V0Jywgc3RvcE1vdmUpO1xyXG4gICAgICAgICAgICBmdW5jdGlvbiBzdGFydE1vdmUgKGUpe1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaGVpZ2h0ID0gdGhpcy5vZmZzZXRIZWlnaHQsXHJcbiAgICAgICAgICAgICAgICB3aWR0aCA9IHRoaXMub2Zmc2V0V2lkdGg7XHJcbiAgICAgICAgICAgIHRoaXMuc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZVkoJHsoZS5vZmZzZXRZIC0gaGVpZ2h0KSAvIDUwfXB4KSB0cmFuc2xhdGVYKCR7KGUub2Zmc2V0WCAtIHdpZHRoKSAvIDUwfXB4KWA7ICAgXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIHN0b3BNb3ZlKCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zdHlsZS50cmFuc2Zvcm0gPSAndHJhbnNsYXRlKDAsIDApJztcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGlmKHRhYnMpe1xyXG4gICAgICAgIHRhYnMuZm9yRWFjaCh0YWIgPT57XHJcbiAgICAgICAgICAgIHRhYi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGUpe1xyXG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaWQgPSB0aGlzLmRhdGFzZXQudGFiT3BlbixcclxuICAgICAgICAgICAgICAgICAgICAgIHBhcmVudEJsb2NrID0gdGhpcy5jbG9zZXN0KCcudGFicy13cmFwcGVyJyksICBcclxuICAgICAgICAgICAgICAgICAgICAgIHRhYnNCbG9ja3MgPSBwYXJlbnRCbG9jay5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS10YWJdJyksXHJcbiAgICAgICAgICAgICAgICAgICAgICB0YWJzQnV0dG9ucyA9ICBwYXJlbnRCbG9jay5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS10YWItb3Blbl0nKVxyXG4gICAgICAgICAgICAgICAgdGFic0Jsb2Nrcy5mb3JFYWNoKGJsb2NrID0+e1xyXG4gICAgICAgICAgICAgICAgICAgIGJsb2NrLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHRhYnNCdXR0b25zLmZvckVhY2goYnV0dG9uID0+e1xyXG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgW2RhdGEtdGFiPVwiJHtpZH1cIl1gKS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICAkKCdbZGF0YS1tb2RhbF0nKS5pemlNb2RhbCgpO1xyXG4gICAgJCgnW2RhdGEtbW9kYWwtb3Blbl0nKS5vbignY2xpY2snLCBmdW5jdGlvbihlKXtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgY29uc3QgaWQgPSAkKHRoaXMpLmF0dHIoJ2RhdGEtbW9kYWwtb3BlbicpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGlkKVxyXG4gICAgICAgICQoYFtkYXRhLW1vZGFsPSR7aWR9XWApLml6aU1vZGFsKCdvcGVuJyk7XHJcblxyXG4gICAgfSk7XHJcbiAgICAkKCcuZmlsdGVyLXJhbmdlJykuZWFjaChmdW5jdGlvbihpLCBlbGVtKXtcclxuICAgICAgICBjb25zdCByYW5nZSA9ICQoZWxlbSkuZmluZCgnLmpzLXJhbmdlLWZyb20tdG8nKSxcclxuICAgICAgICAgICAgICBpbnB1dEZyb20gPSAkKGVsZW0pLmZpbmQoJ1tkYXRhLWZyb21dJyksXHJcbiAgICAgICAgICAgICAgaW5wdXRUbyA9ICQoZWxlbSkuZmluZCgnW2RhdGEtdG9dJylcclxuICAgICAgICAkKHJhbmdlKS5pb25SYW5nZVNsaWRlcih7XHJcbiAgICAgICAgICAgIG1pbjogJCgnLmpzLXJhbmdlLWZyb20tdG8nKS5kYXRhKCdtaW4nKSxcclxuICAgICAgICAgICAgbWF4OiAkKCcuanMtcmFuZ2UtZnJvbS10bycpLmRhdGEoJ21heCcpLFxyXG4gICAgICAgICAgICBmcm9tOiAkKCcuanMtcmFuZ2UtZnJvbS10bycpLmRhdGEoJ2Zyb20nKSxcclxuICAgICAgICAgICAgdG86ICQoJy5qcy1yYW5nZS1mcm9tLXRvJykuZGF0YSgndG8nKSxcclxuICAgICAgICAgICAgdHlwZTogJ2RvdWJsZScsXHJcbiAgICAgICAgICAgIG9uQ2hhbmdlOiBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgJChpbnB1dFRvKS52YWwoZGF0YS50b19wcmV0dHkpO1xyXG4gICAgICAgICAgICAgICAgJChpbnB1dEZyb20pLnZhbChkYXRhLmZyb21fcHJldHR5KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSlcclxuICAgICQoJy5maWx0ZXItYmxvY2tfX3RpdGxlJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKXtcclxuICAgICAgICAkKHRoaXMpLnRvZ2dsZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5maWx0ZXItYmxvY2snKS5maW5kKCcuZmlsdGVyLWJsb2NrX19jb250ZW50Jykuc2xpZGVUb2dnbGUoKTtcclxuICAgIH0pO1xyXG5cclxuICAgICQoJy5zZWxlY3QnKS5uaWNlU2VsZWN0KCk7XHJcblxyXG4gICAgJCgnLnNsaWRlcicpLmVhY2goZnVuY3Rpb24oaSwgc2xpZGVyKXtcclxuICAgICAgICBjb25zdCBzbGlkZXNUb1Nob3cgPSArc2xpZGVyLmRhdGFzZXQuY291bnQsXHJcbiAgICAgICAgICAgICAgICBzbGlkZXMgPSAkKHNsaWRlcikuZmluZCgnLnNsaWRlcl9fbGlzdCcpLFxyXG4gICAgICAgICAgICAgICAgcHJldkFycm93ID0gJChzbGlkZXIpLmZpbmQoJ1tkYXRhLXNsaWRlci1hcnJvdz1cInByZXZcIl0nKSxcclxuICAgICAgICAgICAgICAgIG5leHRBcnJvdyA9ICQoc2xpZGVyKS5maW5kKCdbZGF0YS1zbGlkZXItYXJyb3c9XCJuZXh0XCJdJyk7XHJcbiAgICAgICAgc2xpZGVzLnNsaWNrKHtcclxuICAgICAgICAgICAgc2xpZGVzVG9TaG93OiBzbGlkZXNUb1Nob3csXHJcbiAgICAgICAgICAgIHByZXZBcnJvdzogcHJldkFycm93LFxyXG4gICAgICAgICAgICBuZXh0QXJyb3c6IG5leHRBcnJvdyxcclxuICAgICAgICAgICAgcmVzcG9uc2l2ZTogW1xyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICBicmVha3BvaW50OiAxNjAwLFxyXG4gICAgICAgICAgICAgICAgICBzZXR0aW5nczoge1xyXG4gICAgICAgICAgICAgICAgICAgIHNsaWRlc1RvU2hvdzogc2xpZGVzVG9TaG93IC0gMSxcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBicmVha3BvaW50OiAxNDQwLFxyXG4gICAgICAgICAgICAgICAgICAgIHNldHRpbmdzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICBzbGlkZXNUb1Nob3c6IHNsaWRlc1RvU2hvdyAtIDIsXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBicmVha3BvaW50OiAxMDI1LFxyXG4gICAgICAgICAgICAgICAgICAgIHNldHRpbmdzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhcmlhYmxlV2lkdGg6IHRydWVcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgXVxyXG4gICAgICAgIH0pICAgICAgICBcclxuICAgIH0pO1xyXG5cclxuICAgICQoJ1tkYXRhLWZpbHRlci10b2dnbGVdJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKXtcclxuICAgICAgICAkKCcuZmlsdGVyX193cmFwcGVyJykuc2xpZGVUb2dnbGUoKTtcclxuICAgIH0pO1xyXG5cclxuICAgICQoJy5idXJnZXInKS5vbignY2xpY2snLCBmdW5jdGlvbigpe1xyXG4gICAgICAgIGlmKCQoJy5idXJnZXInKS5oYXNDbGFzcygnYWN0aXZlJykpe1xyXG4gICAgICAgICAgICAkKCcuYnVyZ2VyJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAkKCdib2R5JykuY3NzKHtcclxuICAgICAgICAgICAgICAgICdvdmVyZmxvdy15JzogJ3Vuc2V0J1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICQoJy5idXJnZXInKS5hZGRDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICQoJ2JvZHknKS5jc3Moe1xyXG4gICAgICAgICAgICAgICAgJ292ZXJmbG93LXknOiAnaGlkZGVuJ1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAkKCdbZGF0YS1maXJzdC1sZXZlbF0nKS5mYWRlSW4oNDAwKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuICAgICQoJy5tb2JpbGUtbWVudV9fY2xvc2UnKS5vbignY2xpY2snLCBmdW5jdGlvbigpe1xyXG4gICAgICAgICQoJy5tb2JpbGUtbWVudScpLmZhZGVPdXQoNDAwKTtcclxuICAgICAgICAkKCcuYnVyZ2VyJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICQoJ2JvZHknKS5jc3Moe1xyXG4gICAgICAgICAgICAnb3ZlcmZsb3cteSc6ICd1bnNldCdcclxuICAgICAgICB9KVxyXG4gICAgfSk7XHJcbiAgICAkKCdbZGF0YS1zdWJtZW51LW9wZW5dJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKXtcclxuICAgICAgICBjb25zdCBpZCA9ICQodGhpcykuZGF0YSgnc3VibWVudS1vcGVuJyk7XHJcbiAgICAgICAgJCgnW2RhdGEtc3VibWVudT1cIicraWQrJ1wiXScpLmZhZGVJbig0MDApXHJcbiAgICB9KTtcclxuICAgICQoJy5tb2JpbGUtbWVudV9fYmFjaycpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgJCgnW2RhdGEtc3VibWVudV0nKS5mYWRlT3V0KDQwMCk7XHJcbiAgICB9KTtcclxufSk7XHJcbiJdfQ==
